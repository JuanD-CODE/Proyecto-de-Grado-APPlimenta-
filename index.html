<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>APPlimenta - Prototipo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="static/css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>

<header class="header">
  <div class="brand">
    <img src="static/img/logo.svg" alt="APPlimenta logo">
    <div>
      <div class="logo-text">APPlimenta</div>
      <div class="small">Redistribución responsable de alimentos</div>
    </div>
  </div>
  <nav class="nav">
    <a href="#" class="ghost" data-link="home">Inicio</a>
    <a href="#" class="ghost" data-link="offers">Ofertas</a>
    <a href="#" class="ghost" data-link="newOffer">Crear oferta</a>
    <a href="#" class="ghost" data-link="map">Mapa</a>
    <a href="#" class="ghost" data-link="dashboard">Dashboard</a>
    <a href="#" class="ghost" data-link="dashboardOrg">Dashboard Org</a>
    <a href="#" class="btn" data-link="login">Iniciar sesión</a>
    <a href="#" class="ghost" data-link="register">Registrarse</a>
  </nav>
</header>

  <main class="container">
    <div data-section="home" style="display:block;">
      <div class="card">
        <h2 class="h1">Bienvenido a APPlimenta</h2>
        <p class="small">Prototipo Navega entre secciones para simular el flujo de donación y solicitud de alimentos.</p>
        <div style="margin-top:12px;">
          <a class="btn" data-link="newOffer" href="#">Crear Oferta</a>
          <a class="btn" data-link="offers" href="#">Ver Ofertas</a>
          <a class="btn" data-link="map" href="#">Ver Mapa</a>
        </div>
      </div>
      <div style="height:12px"></div>
      <div class="grid">
        <div>
          <div class="card">
            <h3 class="h1">Últimas ofertas</h3>
            <div id="offersList"></div>
          </div>
        </div>
        <aside>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <div class="small">Usuario</div>
                <div style="font-weight:700">Fundación Manos Amigas</div>
              </div>
              <div class="badge">Activa</div>
            </div>
            <div style="height:12px"></div>
            <div class="link-list">
              <a class="ghost" href="#" data-link="dashboard">Mi dashboard</a>
              <a class="ghost" href="#" data-link="offers">Ver ofertas</a>
              <a class="ghost" href="#" data-link="map">Mapa</a>
            </div>
          </div>
          <div style="height:12px"></div>
          <div class="card">
            <h4 class="h1">Información</h4>
            <p class="small">Este prototipo simula el flujo entre Donantes y Organizaciones.</p>
          </div>
        </aside>
      </div>
    </div>

    <div data-section="offers" style="display:none;">
      <div class="card">
        <a class="ghost" href="#" data-link="home">← Volver</a>
        <h2 class="h1">Ofertas disponibles</h2>
        
        <!-- Filtros y búsqueda -->
        <div class="search-filters">
          <input type="text" id="searchOffers" class="input" placeholder="Buscar ofertas..." style="margin-bottom: 8px;">
          <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <select id="filterLocation" class="input" style="flex: 1;">
              <option value="">Todas las ubicaciones</option>
            </select>
            <select id="filterType" class="input" style="width: 150px;">
              <option value="">Todos los tipos</option>
              <option value="fruta">Frutas</option>
              <option value="verdura">Verduras</option>
              <option value="pan">Panadería</option>
              <option value="lacteo">Lácteos</option>
            </select>
          </div>
        </div>

        <div id="offersList"></div>
      </div>
    </div>

    <div data-section="newOffer" style="display:none;">
      <div class="card">
        <a class="ghost" href="#" data-link="home">← Volver</a>
        <h2 class="h1">Crear nueva oferta</h2>
        <p class="small">Formulario simulado (guarda en localStorage).</p>
        <form id="newOfferForm">
          <div class="form-row"><div style="flex:1"><label>Nombre del producto</label><input class="input" name="title" placeholder="Ej. Pan del día"></div><div style="width:150px"><label>Cantidad</label><input class="input" name="qty" placeholder="Ej. 20 kg"></div></div>
          <div class="form-row"><div style="flex:1"><label>Ubicación</label><input class="input" name="location" placeholder="Ciudad o dirección"></div><div style="width:150px"><label>Contacto</label><input class="input" name="contact" placeholder="Teléfono/email"></div></div>
          <div class="form-row">
            <div style="flex:1">
              <label>Tipo de producto</label>
              <select class="input" name="type">
                <option value="fruta">Fruta</option>
                <option value="verdura">Verdura</option>
                <option value="pan">Panadería</option>
                <option value="lacteo">Lácteo</option>
                <option value="procesado">Procesado</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <div style="width:150px">
              <label>Vence en</label>
              <input class="input" name="exp" placeholder="Ej. 2 días">
            </div>
          </div>
          <div style="display:flex;gap:8px;align-items:center"><button class="btn" type="submit">Publicar oferta</button><button class="ghost" data-link="offers">Cancelar</button></div>
        </form>
      </div>
    </div>

    <div data-section="map" style="display:none;">
      <div class="card">
        <a class="ghost" href="#" data-link="home">← Volver</a>
        <h2 class="h1">Mapa de ofertas</h2>
        <div class="map-box" id="mapid"></div>
        <p class="small" style="margin-top:8px">Marcadores de ejemplo. En versión final los usuarios verán rutas y tiempos.</p>
      </div>
    </div>

    <div data-section="dashboard" style="display:none;">
      <div class="card">
        <a class="ghost" href="#" data-link="home">← Volver</a>
        <h2 class="h1">Dashboard - Fundación</h2>
        <p class="small">Resumen rápido de actividades.</p>
        <div style="display:flex;gap:12px;margin-top:12px">
          <div class="card" style="flex:1">
            <h3 style="margin:0">Ofertas publicadas</h3>
            <div style="font-size:28px;font-weight:700;margin-top:8px" id="dashboardOffersCount">12</div>
            <div class="small">Ofertas en los últimos 30 días</div>
          </div>
          <div class="card" style="width:260px">
            <h3 style="margin:0">Solicitudes</h3>
            <div style="font-size:28px;font-weight:700;margin-top:8px" id="dashboardRequestsCount">34</div>
            <div class="small">Total de solicitudes recibidas</div>
          </div>
        </div>
      </div>
    </div>

    <div data-section="offerDetail" style="display:none;">
      <div class="card">
        <a class="ghost" href="#" data-link="offers">← Volver</a>
        <h2 id="offerDetailTitle" class="h1">Título oferta</h2>
        <div id="offerDetailMeta" class="small">meta</div>
        <div style="height:12px"></div>
        <div style="display:flex;gap:12px;">
          <div style="flex:1">
            <p class="small">Descripción: Oferta simulada. En el prototipo real se mostrará información de contacto y logística.</p>
            <div class="small" id="offerDetailContact">Contacto: </div>
          </div>
          <div style="width:180px">
            <a class="btn" href="#" onclick="app.solicitarOferta();return false;">Solicitar</a>
          </div>
        </div>
      </div>
    </div>

    
    <div data-section="register" style="display:none;">
      <div class="card" style="max-width:520px;margin:0 auto">
        <h2 class="h1">Registro de usuario</h2>
        <p class="small">Complete el formulario para crear una cuenta (simulado).</p>
        <form id="registerForm">
          <div class="input-group"><label>Nombre completo</label><input class="input" name="fullname" required></div>
          <div class="input-group"><label>Email</label><input class="input" type="email" name="email" required></div>
          <div class="input-group"><label>Contraseña</label><input class="input" type="password" name="pass" required></div>
          <div class="input-group"><label>Teléfono</label><input class="input" name="phone"></div>
          <div class="input-group"><label>Tipo de usuario</label>
            <select class="input" name="type">
              <option>Productor</option>
              <option>Organización social</option>
            </select>
          </div>
          <div class="input-group"><label>Ciudad</label><input class="input" name="city"></div>
          <button class="btn" type="submit">Registrarme</button>
          <a class="ghost" data-link="home" href="#">Cancelar</a>
        </form>
      </div>
    </div>


    <div data-section="login" style="display:none;">
      <div class="card" style="max-width:520px;margin:0 auto">
        <h2 class="h1">Iniciar sesión</h2>
        <p class="small">Simulación de login. En la fase final habrá autenticación real.</p>
        <form onsubmit="app.login();return false;">
          <div style="margin-bottom:8px"><label>Email</label><input class="input" placeholder="correo@ejemplo.com"></div>
          <div style="margin-bottom:8px"><label>Contraseña</label><input class="input" type="password" placeholder="••••••"></div>
          <div style="display:flex;gap:8px"><button class="btn" type="submit">Entrar</button><a class="ghost" data-link="home" href="#">Cancelar</a></div>
        </form>
      </div>
    </div>

    <!-- DASHBOARD ORGANIZACIÓN SOCIAL -->
    <div data-section="dashboardOrg" style="display:none;">
      <div class="card">
        <h2 class="h1">Dashboard de la Organización Social</h2>

        <div class="stats-grid">
          <div class="stat-box">
            <h3>Total de solicitudes enviadas</h3>
            <p id="org_total_requests" class="stat-number">0</p>
          </div>

          <div class="stat-box">
            <h3>Ofertas aceptadas</h3>
            <p id="org_accepted_offers" class="stat-number">0</p>
          </div>
        </div>

        <h3>Historial de entregas</h3>
        <ul id="org_deliveries" class="list"></ul>

        <h3>Sugerencias de ofertas cercanas</h3>
        <ul id="org_suggestions" class="list"></ul>
      </div>
    </div>

  </main>

  <footer class="footer">Prototipo APPlimenta</footer>

  <!-- Contenedor para notificaciones -->
  <div id="notifications" style="position:fixed; top:20px; right:20px; z-index:1000;"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="static/js/app.js"></script>
</body>
</html>